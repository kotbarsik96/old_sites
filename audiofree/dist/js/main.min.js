function checkWebpSupport(){return new Promise(((e,t)=>{let l=new Image;l.onload=function(){e(document.querySelector("body").classList.add("webp"))},l.onerror=function(){t(document.querySelector("body").classList.remove("webp"))},l.src="../img/check-webp/check.webp"}))}checkWebpSupport();let headerData={el:document.querySelector(".header"),isMobile:!1,isDesktop:!1,media:899,scrollPos:window.pageYOffset,hrefs:{cart:"../html-products/cart.html",favorites:"../html-products/favorites.html",indexpage:"../html-main/index.html",catalogue:"../html-main/catalogue.html",contacts:"../html-main/contacts.html",deliveryPayment:"../html-main/delivery-payment.html",guarantees:"../html-main/guarantees.html"},elConditions:{headerMenuOpened:!1,searchOpened:!1,headerCatalogueOpened:!1}};const Header={data:()=>headerData,mounted(){this.checkMedia()},methods:{checkMedia(){let e=this.scrollHeader.bind(this);l=l.bind(this);let t=window.matchMedia(`(max-width: ${this.media}px)`);function l(){this.refresh(),t.matches?(this.isMobile=!0,this.isDesktop=!1,window.removeEventListener("scroll",e)):(this.isMobile=!1,this.isDesktop=!0,window.addEventListener("scroll",e))}l(),t.addEventListener("change",l)},setPaddingTop(){let e=document.querySelector(".wrapper");setTimeout((()=>{let t=0,l=this.el.querySelector(".header__desktop")||this.el.querySelector(".header__mobile");if(l.classList.contains("header__desktop")){t=l.querySelector(".header-top").offsetHeight+l.querySelector(".header-main").offsetHeight+l.querySelector(".header-bottom").offsetHeight}l.classList.contains("header__mobile")&&(t=l.offsetHeight),e.style.paddingTop=`${t}px`}),0)},scrollHeader(){l=l.bind(this),n=n.bind(this);let e=this.el.querySelector(".header-top"),t=(this.el.querySelector(".header-main"),this.el.querySelector(".header-bottom"));function l(){this.el.style.top=`-${e.offsetHeight}px`,t.style.top=`-${t.offsetHeight}px`}function n(){this.el.style.top="0px",t.style.top="0px"}this.scrollPos<window.pageYOffset&&l(),this.scrollPos>window.pageYOffset&&n(),this.scrollPos=window.pageYOffset},refresh(){this.setPaddingTop(),this.el.style.top="0px";let e=this.elConditions;for(let t in e)e[t]=!1;document.querySelector("body").classList.remove("__no-scroll"),setTimeout((()=>{showItemsAmount()}),0)},toggleMenu(){let e=this.elConditions.headerMenuOpened,t=document.querySelector("body");e?(this.elConditions.headerMenuOpened=!1,t.classList.remove("__no-scroll")):(this.elConditions.headerMenuOpened=!0,t.classList.add("__no-scroll"))},toggleSearch(){this.elConditions.searchOpened=!this.elConditions.searchOpened},toggleHeaderCatalogue(){this.elConditions.headerCatalogueOpened=!this.elConditions.headerCatalogueOpened}}};Vue.createApp(Header).mount("#header");class SpoilerBlock{constructor(){if(this.spoilerBlocks=Array.from(document.querySelectorAll("[data-spoiler]:not([data-inside-app])")),this.spoilerBlocks.length>0){this.sortSrcs().forEach((e=>this.initLoading(e)))}}initSpoilerBlock(e){Array.from(e.querySelectorAll("[data-spoiler]")).forEach((e=>{const t=e.dataset.spoiler.split(", ")[1];this.initLoading(t,e)}))}initLoading(e,t=null){e&&fetch(e).then((e=>e.json())).then((l=>{this.loadContent(l,e,t)}))}sortSrcs(){let e=new Set;return this.spoilerBlocks.forEach((t=>{let l=t.dataset.spoiler.split(", ");e.add(l[1])})),Array.from(e)}loadContent(e,t,l=null){l&&this.renderSpoilerBlock(l,e),l||this.spoilerBlocks.forEach((l=>{l.dataset.spoiler.split(", ")[1]===t&&this.renderSpoilerBlock(l,e)}))}renderSpoilerBlock(e,t){let l=e.dataset.spoiler.split(", ")[0],n=window.matchMedia(`(max-width: ${l}px)`),r=new Toggler(e,e.querySelector(".toggler"));r.render(t).then((()=>{r.setFirstActive(),r.setHandlers(),r.setReplace(n)}));let i=new Spoiler(e,e.querySelector(".spoiler"));i.render(t).then((()=>{i.setHandlers(),i.setReplace(n)}))}}class Toggler{constructor(e,t){this.spoilerBlock=e,this.el=t,this.content=[],this.getTemplates()}render(e){return new Promise(((t,l)=>{let n=this.el.querySelector(".toggler__titles");e.forEach((e=>{let t=this.templates.title.cloneNode(!0);t.querySelector(".toggler__title--text").innerHTML=e.title,n.append(t);let l=document.createElement("div");if(l.classList.add("toggler__content"),e.content.paragraphs&&this.templates.contentParagraph||e.content.subtitle){l=this.templates.contentParagraph.cloneNode(!0),l.removeAttribute("data-spbl-render");let t=l.querySelector(".toggler__content--subtitle"),n=l.querySelector(".toggler__content--paragraph");n.remove(),e.content.subtitle?t.innerHTML=e.content.subtitle:t.remove(),e.content.paragraphs.forEach((e=>{let t=n.cloneNode();t.innerHTML=e,l.append(t)}))}e.content.specs&&(l.classList.add("specs"),e.content.specs.forEach((e=>{let t=renderSpecsItem(e.name,e.text);l.innerHTML+=t})));let r={};r.title=t,r.content=l,this.content.push(r)})),t()}))}getTemplates(){let e={};e.title=this.el.querySelector(".toggler__title"),this.el.querySelectorAll(".toggler__content").forEach((t=>{"paragraphs"!==t.dataset.spblRender&&t.dataset.spblRender||(e.contentParagraph=t)})),this.templates=e;for(let t in e)e[t].remove()}setHandlers(){for(let e in this.content){let t=this.content[e];function l(){this.hideAllContents(),this.showContent(t.title,t.content)}l=l.bind(this),t.title.addEventListener("click",l)}}showContent(e,t){e.classList.add("__active"),this.el.append(t)}hideAllContents(){for(let e in this.content){let t=this.content[e];t.title.classList.remove("__active"),t.content.remove()}}setFirstActive(){let e=this.content[0];this.showContent(e.title,e.content)}setReplace(e){let t=this.replaceSpoiler.bind(this);t(e),e.addEventListener("change",t)}replaceSpoiler(e){e.matches||(this.spoilerBlock.innerHTML="",this.spoilerBlock.append(this.el))}}class Spoiler{constructor(e,t){this.spoilerBlock=e,this.el=t,this.content=[],this.getTemplates()}render(e){return new Promise(((t,l)=>{e.forEach((e=>{let t=this.templates.spoilerItem.cloneNode(!1),l=this.templates.title.cloneNode();if(l.innerHTML=e.title,t.append(l),e.content.paragraphs){let l=this.templates.content.cloneNode(!0),n=l.querySelector("p")||l.querySelector(".spoiler__content--paragraph");n.remove(),e.content.paragraphs.forEach((e=>{let t=n.cloneNode();t.innerHTML=e,l.append(t)})),t.append(l)}if(e.content.specs){let l=this.templates.content.cloneNode(!1);l.classList.add("specs"),e.content.specs.forEach((e=>{let t=renderSpecsItem(e.name,e.text);l.innerHTML+=t})),t.append(l)}this.el.append(t);let n={};n.title=l,n.content={block:t.querySelector(".spoiler__content"),height:t.querySelector(".spoiler__content").offsetHeight},this.content.push(n)})),t()}))}getTemplates(){let e={};e.spoilerItem=this.el.querySelector(".spoiler__item"),e.title=this.el.querySelector(".spoiler__title"),e.content=this.el.querySelector(".spoiler__content"),e.content.removeAttribute("data-spbl-render"),this.templates=e;for(let t in e)this.templates[t].remove()}setHandlers(){let e=!1;(this.el.hasAttribute("data-is-accordeon")||this.el.closest("[data-is-accordeon]"))&&(e=!0),this.content.forEach((t=>{r=r.bind(this);let l=t.title,n=t.content;function r(){let t=l.classList.contains("__active");e?t?this.closeAllSpoilers():(this.closeAllSpoilers(),this.toggleSpoiler(l,n).show()):t?this.toggleSpoiler(l,n).hide():this.toggleSpoiler(l,n).show()}l.addEventListener("click",r)})),this.closeAllSpoilers()}toggleSpoiler(e,t){let l=t.block;t.height;return{show:function(){e.classList.add("__active"),l.style.maxHeight=1.5*t.height+"px",l.style.removeProperty("padding"),l.style.removeProperty("margin")},hide:function(){e.classList.remove("__active"),l.style.cssText="\n                max-height: 0px;\n                padding: 0;\n                margin: 0 0 5px 0;\n            "}}}closeAllSpoilers(){this.content.forEach((e=>{this.toggleSpoiler(e.title,e.content).hide()}))}setReplace(e){let t=this.replaceToggler.bind(this);t(e),e.addEventListener("change",t)}replaceToggler(e){e.matches&&(this.spoilerBlock.innerHTML="",this.spoilerBlock.append(this.el))}}function renderSpecsItem(e,t){return`\n        <div class="specs__item">\n            <div class="specs__name">${e}</div>\n            <div class="specs__content">${t}</div>\n        </div>\n    `}let spoilerBlockInst=new SpoilerBlock;function dynamicAdaptive(){let e=document.querySelectorAll("[data-dynamic-adaptive]"),t=[],l=[];function n(e,t){t.forEach((t=>{if(e.matches){let e;if(t.isUnique)e=document.querySelector(`.${t.newParentClass}`);else{e=t.oldParent.querySelector(`.${t.newParentClass}`);let l=t.oldParent.parentNode;for(;!e;)l=l.parentNode,e=l.querySelector(`.${t.newParentClass}`)}r(e,t,t.insertType[0])}else r(t.oldParent,t,t.insertType[1])}))}function r(e,t,l){if("prepend"===l)e.prepend(t.obj);else e.append(t.obj)}e.forEach((e=>{let n=e.dataset.dynamicAdaptive.split(", "),r=n[0];r||(r="max");let i=`(${r}-width: ${n[1]}px)`;l.push(i);let s=e.dataset.insertType;s?(s=s.split(", "),1==s.length&&s.push("append")):s=["append","append"];let o={};o.obj=e,o.insertType=s,o.media=i,o.oldParent=e.parentNode,o.newParentClass=n[2],o.isUnique=n[3],n[3]||(o.isUnique=!1),t.push(o)})),l=l.filter(((e,t,l)=>l.indexOf(e)===t)),l.forEach((e=>{let l=window.matchMedia(e),r=t.filter((t=>t.media==e));n(l,r),l.addEventListener("change",(function(){n(l,r)}))}))}function openBlock(e,t,l=!1){e.addEventListener("click",(function(){t.classList.toggle("__active"),l&&e.classList.toggle("__active")}))}function devicesListToggle(){let e=document.querySelectorAll(".devices-toggle");e.length>0&&e.forEach((e=>{let t=e.querySelectorAll(".devices-toggle__title"),l=e.querySelectorAll(".devices-toggle__product");function n(n){let r=e.querySelector(`.devices-toggle__product[data-devices-toggle="${n.dataset.devicesToggle}"]`);t.forEach((e=>{e.classList.remove("__active")})),l.forEach((e=>{e.classList.remove("__shown")})),n.classList.add("__active"),r.classList.add("__shown")}t.forEach((e=>{e.addEventListener("click",(function(){n(e)}))})),e.querySelector(".devices-toggle__title.__active")||n(t[0])}))}function initControls(){let e=document.querySelectorAll(".controls");e.length>0&&e.forEach((e=>{e.querySelectorAll(".controls__amount").forEach((e=>{let t=e.querySelector(".controls__amount--number").querySelector("input");t.addEventListener("input",(function(){let e=t.value;t.value=e.replace(/\D/g,"")})),e.addEventListener("click",(function(e){e.target.classList.contains("controls__amount-button")&&!t.value&&(t.value=1),e.target.classList.contains("controls__amount--less")&&(t.value>0&&t.value--,t.value<=0&&(t.value=1)),e.target.classList.contains("controls__amount--more")&&(t.value.length<=t.maxLength&&t.value++,t.value.length>t.maxLength&&(t.value=1)),t.dispatchEvent(new Event("change"))}))}))}))}function editTables(){let e=document.querySelectorAll(".table");e.length>0&&e.forEach((e=>{let t=0,l=0,n=e.querySelectorAll(".table__column");n.forEach((e=>{let n=e.querySelectorAll(".table__cell");n.length>t&&(t=n.length),n.forEach((e=>{e.offsetHeight>l&&(l=e.offsetHeight)}))})),n.forEach((e=>{let l=e.querySelectorAll(".table__cell").length;for(;l<t;){let t=document.createElement("div");t.className="table__cell",e.append(t),l++}}));let r=e.dataset.clearEmptyCells;r||(r=499);let i=window.matchMedia(`(max-width: ${r}px)`);function s(t){let l=e.querySelectorAll(".table__cell");t.matches&&l.forEach((e=>{e.innerHTML||(e.style.display="none")})),t.matches||l.forEach((e=>{e.style.removeProperty("display")}))}function o(){e.querySelectorAll(".table__cell").forEach((e=>{i.matches?e.style.flexBasis="auto":e.style.flexBasis=`${l}px`}))}s(i),i.addEventListener("change",(function(){s(i)})),o(),window.addEventListener("resize",o)}))}function getStorage(e){let t=localStorage.getItem(e);return JSON.parse(t)}function setStorage(e,t){t=JSON.stringify(t),localStorage.setItem(e,t)}function showItemsAmount(e=null,t=null){if(!e||!t){[["audiofree_cart","icon-circle--cart-icon"],["audiofree_favorites","icon-circle--favorites-icon"]].forEach((n=>{e=n[0],t=n[1],l(e,t)}))}function l(e,t){let l=getStorage(e);if(l){let e=l.length,n=document.querySelectorAll(`.${t}`);if(e>0){let t=document.createElement("div");t.className="icon-circle__number",t.innerHTML=e,n.forEach((e=>{let l=e.querySelector(".icon-circle__number");l&&l.remove(),e.append(t)}))}else n.forEach((e=>{let t=e.querySelector(".icon-circle__number");t&&t.remove()}))}}e&&t&&l(e,t)}function initSelections(){function e(e,t=null){let l=e.querySelector(".select__option--selected");l||(l=e.querySelector(".select__option"),l.classList.add("select__option--selected")),t&&(l.classList.remove("select__option--selected"),t.classList.add("select__option--selected")),l=e.querySelector(".select__option--selected"),selectedText=l.innerText||l.textContent,e.querySelector(".select__selected").innerHTML=selectedText}document.querySelectorAll(".select").forEach((t=>{!function(e){let t=e.querySelector(".select__selected");t||(t=document.createElement("div"),t.className="select__selected",e.prepend(t))}(t),function(t){t.addEventListener("click",(function(l){l.preventDefault(),t.classList.toggle("__active"),l.target.classList.contains("select__option")&&e(t,l.target)}))}(t),e(t)}))}function productFilter(){document.querySelectorAll(".price-range").forEach((e=>{!function(e){let t,l=e.querySelector(".price-range__scale"),n=e.querySelector("[data-max-price-value]");t=n?n.dataset.maxPriceValue:"9999",e.querySelectorAll(".price-range__input").forEach((n=>{n.maxLength=t.length,n.addEventListener("input",(function(e){n.value,n.value=n.value.replace(/\D/g,"")})),n.addEventListener("change",(function(){let r,s;n.classList.contains("price-range__input--min")&&(r=e.querySelector(".price-range__input--max"),n.value&&!r.value&&(r.value=parseInt(t)),n.value&&parseInt(n.value)>parseInt(r.value)&&(n.value=r.value),s=e.querySelector(".price-range__toggle--min")),n.classList.contains("price-range__input--max")&&(r=e.querySelector(".price-range__input--min"),n.value&&!r.value&&(r.value=0),n.value&&parseInt(n.value)<parseInt(r.value)&&(n.value=r.value),s=e.querySelector(".price-range__toggle--max")),n.value&&n.value>parseInt(t)&&(n.value=parseInt(t)),n.value&&(n.value=parseInt(n.value));let o=Math.round(parseInt(t)/(l.clientWidth-s.offsetWidth)),a=parseInt(n.value)/o;s.style.left=`${a}px`,i(e)}))}));let r=e.querySelectorAll(".price-range__toggle");function i(e){let t=e.querySelector(".price-range__toggle--min"),l=e.querySelector(".price-range__toggle--max"),n=e.querySelector(".price-range__bar"),r=parseInt(t.style.left),i=parseInt(l.style.left);n.style.width=i-r+"px",n.style.left=`${r}px`}function s(n){let r,i=Math.round(parseInt(t)/(l.clientWidth-n.offsetWidth));n.classList.contains("price-range__toggle--min")&&(r=e.querySelector(".price-range__input--min")),n.classList.contains("price-range__toggle--max")&&(r=e.querySelector(".price-range__input--max")),r.value=i*parseInt(n.style.left)}function o(){i(e),s(r[0]),s(r[1]),r.forEach((e=>{let t=l.clientWidth-e.offsetWidth;e.classList.contains("price-range__toggle--min")&&(e.style.left="0px"),e.classList.contains("price-range__toggle--max")&&(e.style.left=`${t}px`)}))}r.forEach((e=>{let t=l.clientWidth-e.offsetWidth,n=e.classList.contains("price-range__toggle--min"),r=e.classList.contains("price-range__toggle--max");n&&(e.style.left=0),r&&(e.style.left=`${t}px`),e.ondragstart=function(){return!1}})),e.addEventListener("pointerdown",(function(t){let n=e.querySelector(".price-range__toggle--min"),r=e.querySelector(".price-range__toggle--max"),o=l.clientWidth-n.offsetWidth;if(t.target.classList.contains("price-range__scale")||t.target.classList.contains("price-range__bar")){t.preventDefault();let l=t.clientX-e.getBoundingClientRect().left,c=(parseInt(n.style.left)+parseInt(r.style.left))/2,d=n.offsetWidth/2;function a(e){let t=l-d;t<0&&(t=0),t>o&&(t=`${o}px`),e.style.left=`${t}px`}l<c&&(a(n,r),s(n)),l>=c&&(a(r,n),s(r)),i(e)}function c(t,l){let n,r=l-t.getBoundingClientRect().left;function a(l){l.preventDefault(),d(l.clientX,t,n),i(e),s(t)}function c(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",c)}function d(t,l,n){let i=t-r-e.getBoundingClientRect().left;i<0&&(i=0),i>o&&(i=`${o}px`);let s=parseInt(n.style.left);(l.classList.contains("price-range__toggle--min")&&i>s||l.classList.contains("price-range__toggle--max")&&i<s)&&(i=`${s}px`),l.style.left=`${i}px`}t.classList.contains("price-range__toggle--min")&&(n=e.querySelector(".price-range__toggle--max")),t.classList.contains("price-range__toggle--max")&&(n=e.querySelector(".price-range__toggle--min")),document.addEventListener("pointermove",a),document.addEventListener("pointerup",c)}t.target.classList.contains("price-range__toggle")&&c(t.target,t.clientX)})),o(),window.addEventListener("resize",o)}(e)})),document.querySelectorAll(".filter__clear-button").forEach((e=>{e.addEventListener("click",(function(){let t=e.closest(".filter");t.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=!1})),t.querySelectorAll(".price-range").forEach((e=>{e.querySelectorAll(".price-range__input").forEach((e=>{e.value=""}));let t=e.querySelector(".price-range__scale");e.querySelector(".price-range__toggle--min").style.left=0;let l=e.querySelector(".price-range__toggle--max");l.style.left=t.clientWidth-l.offsetWidth+"px";let n=e.querySelector(".price-range__bar");n.style.width=`${t.clientWidth}px`,n.style.left=0}))}))}))}dynamicAdaptive(),initControls(),editTables(),showItemsAmount(),initSelections(),productFilter();let popupMethods={createPopup:function(e,t=5750){let l=document.createElement("div");l.className="popup card",t<=0&&l.classList.add("popup--hold"),l.innerHTML=`\n        <div class="card__bottom card__side popup__bottom"></div>\n        <div class="card__container card__side popup__container">\n            <div class="popup__cancel">\n                <div class="popup__cancel--button"></div>\n            </div>\n            ${e}\n        </div>\n        `;let n=document.querySelector(".wrapper"),r=l.querySelector(".popup__cancel");if(t>0){n.querySelectorAll(".popup").forEach((e=>{popupMethods.removePopup(e)})),setTimeout((()=>{popupMethods.removePopup(l)}),t),r.addEventListener("click",(function(){popupMethods.removePopup(l)}))}t<=0&&r.addEventListener("click",(function(){popupMethods.removePopupNoTimer(l)})),n.append(l),setTimeout((()=>{l.style.transform="translate(0, -20%)"}),100)},removePopup:function(e){e&&e.classList.contains("popup")&&!e.classList.contains("popup--hold")&&(e.style.transform="translate(150%, -20%)",e.addEventListener("transitionend",(function(){e.remove()})))},removePopupNoTimer:function(e){e.style.transform="translate(-150%, -20%)",e.addEventListener("transitionend",(function(){e.remove()}))},createNote:function(e){return`\n            <p class="popup__note">\n                ${e}\n            </p>\n        `}};function swiperSlidersInit(){new Swiper(".pagination-slider",{slideClass:"pagination-slide",wrapperClass:"pagination-slider__wrapper",loop:!0,draggable:!0,effect:"flip",observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},pagination:{el:".swiper-pagination",clickable:!0}});new Swiper(".mobile-slider",{wrapperClass:"mobile-slider__wrapper",slideClass:"mobile-slider__slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},breakpoints:{500:{slidesPerView:2}}}),document.querySelectorAll("[data-mobile-slider]").forEach((e=>{e.swiper.disable();let t=e.dataset.mobileSlider.split(", "),l=t[0],n=t[1],r=e.querySelector(".mobile-slider__wrapper"),i=r.childNodes;i=Array.from(i).filter((e=>{if("3"!=e.nodeType&&"#text"!=e.nodeName&&!e.dataset.dynamicAdaptive)return e.classList.add("mobile-slider__slide"),e}));let s=window.matchMedia(`(${l}-width: ${n}px)`);function o(t){if(t.matches){e.swiper.enable(),r.style.flexWrap="nowrap";let t=e.querySelector(".icon-circle--slider");t||(t=document.createElement("div"),t.classList.add("icon-circle","icon-circle--slider"),t.innerHTML='\n          <div class="icon-circle__item __icon-slider-hand"></div>\n        ',e.append(t),t.addEventListener("click",(function(){e.swiper.slideNext()}))),t.style.display="flex"}else{e.swiper.disable(),r.style.flexWrap="wrap";let t=e.querySelector(".icon-circle--slider");t&&t.remove()}}s.addListener(o),o(s)}));new Swiper(".tape-slider",{wrapperClass:"tape-slider__wrapper",slideClass:"tape-slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},breakpoints:{640:{slidesPerView:2},940:{slidesPerView:3},1260:{slidesPerView:4},1800:{slidesPerView:5}}}),new Swiper(".prodpage-slider",{wrapperClass:"prodpage-slider__wrapper",slideClass:"prodpage-slider__slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}}})}