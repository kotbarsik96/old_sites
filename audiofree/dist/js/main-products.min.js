fetch("../js/JSON/products.json").then((e=>e.json())).then((e=>{new Promise(((e,t)=>{let l=new Image;l.onload=function(){e(document.querySelector("body").classList.add("webp"))},l.onerror=function(){t(document.querySelector("body").classList.remove("webp"))},l.src="../img/check-webp/check.webp"}));let t={el:document.querySelector(".header"),isMobile:!1,isDesktop:!1,media:899,scrollPos:window.pageYOffset,hrefs:{cart:"../html-products/cart.html",favorites:"../html-products/favorites.html",indexpage:"../html-main/index.html",catalogue:"../html-main/catalogue.html",contacts:"../html-main/contacts.html",deliveryPayment:"../html-main/delivery-payment.html",guarantees:"../html-main/guarantees.html"},elConditions:{headerMenuOpened:!1,searchOpened:!1,headerCatalogueOpened:!1}};const l={data:()=>t,mounted(){this.checkMedia()},methods:{checkMedia(){let e=this.scrollHeader.bind(this);l=l.bind(this);let t=window.matchMedia(`(max-width: ${this.media}px)`);function l(){this.refresh(),t.matches?(this.isMobile=!0,this.isDesktop=!1,window.removeEventListener("scroll",e)):(this.isMobile=!1,this.isDesktop=!0,window.addEventListener("scroll",e))}l(),t.addEventListener("change",l)},setPaddingTop(){let e=document.querySelector(".wrapper");setTimeout((()=>{let t=0,l=this.el.querySelector(".header__desktop")||this.el.querySelector(".header__mobile");if(l.classList.contains("header__desktop")){t=l.querySelector(".header-top").offsetHeight+l.querySelector(".header-main").offsetHeight+l.querySelector(".header-bottom").offsetHeight}l.classList.contains("header__mobile")&&(t=l.offsetHeight),e.style.paddingTop=`${t}px`}),0)},scrollHeader(){l=l.bind(this),r=r.bind(this);let e=this.el.querySelector(".header-top"),t=(this.el.querySelector(".header-main"),this.el.querySelector(".header-bottom"));function l(){this.el.style.top=`-${e.offsetHeight}px`,t.style.top=`-${t.offsetHeight}px`}function r(){this.el.style.top="0px",t.style.top="0px"}this.scrollPos<window.pageYOffset&&l(),this.scrollPos>window.pageYOffset&&r(),this.scrollPos=window.pageYOffset},refresh(){this.setPaddingTop(),this.el.style.top="0px";let e=this.elConditions;for(let t in e)e[t]=!1;document.querySelector("body").classList.remove("__no-scroll"),setTimeout((()=>{p()}),0)},toggleMenu(){let e=this.elConditions.headerMenuOpened,t=document.querySelector("body");e?(this.elConditions.headerMenuOpened=!1,t.classList.remove("__no-scroll")):(this.elConditions.headerMenuOpened=!0,t.classList.add("__no-scroll"))},toggleSearch(){this.elConditions.searchOpened=!this.elConditions.searchOpened},toggleHeaderCatalogue(){this.elConditions.headerCatalogueOpened=!this.elConditions.headerCatalogueOpened}}};Vue.createApp(l).mount("#header");class r{constructor(e,t){this.spoilerBlock=e,this.el=t,this.content=[],this.getTemplates()}render(e){return new Promise(((t,l)=>{let r=this.el.querySelector(".toggler__titles");e.forEach((e=>{let t=this.templates.title.cloneNode(!0);t.querySelector(".toggler__title--text").innerHTML=e.title,r.append(t);let l=document.createElement("div");if(l.classList.add("toggler__content"),e.content.paragraphs&&this.templates.contentParagraph||e.content.subtitle){l=this.templates.contentParagraph.cloneNode(!0),l.removeAttribute("data-spbl-render");let t=l.querySelector(".toggler__content--subtitle"),r=l.querySelector(".toggler__content--paragraph");r.remove(),e.content.subtitle?t.innerHTML=e.content.subtitle:t.remove(),e.content.paragraphs.forEach((e=>{let t=r.cloneNode();t.innerHTML=e,l.append(t)}))}e.content.specs&&(l.classList.add("specs"),e.content.specs.forEach((e=>{let t=i(e.name,e.text);l.innerHTML+=t})));let n={};n.title=t,n.content=l,this.content.push(n)})),t()}))}getTemplates(){let e={};e.title=this.el.querySelector(".toggler__title"),this.el.querySelectorAll(".toggler__content").forEach((t=>{"paragraphs"!==t.dataset.spblRender&&t.dataset.spblRender||(e.contentParagraph=t)})),this.templates=e;for(let t in e)e[t].remove()}setHandlers(){for(let e in this.content){let t=this.content[e];function l(){this.hideAllContents(),this.showContent(t.title,t.content)}l=l.bind(this),t.title.addEventListener("click",l)}}showContent(e,t){e.classList.add("__active"),this.el.append(t)}hideAllContents(){for(let e in this.content){let t=this.content[e];t.title.classList.remove("__active"),t.content.remove()}}setFirstActive(){let e=this.content[0];this.showContent(e.title,e.content)}setReplace(e){let t=this.replaceSpoiler.bind(this);t(e),e.addEventListener("change",t)}replaceSpoiler(e){e.matches||(this.spoilerBlock.innerHTML="",this.spoilerBlock.append(this.el))}}class n{constructor(e,t){this.spoilerBlock=e,this.el=t,this.content=[],this.getTemplates()}render(e){return new Promise(((t,l)=>{e.forEach((e=>{let t=this.templates.spoilerItem.cloneNode(!1),l=this.templates.title.cloneNode();if(l.innerHTML=e.title,t.append(l),e.content.paragraphs){let l=this.templates.content.cloneNode(!0),r=l.querySelector("p")||l.querySelector(".spoiler__content--paragraph");r.remove(),e.content.paragraphs.forEach((e=>{let t=r.cloneNode();t.innerHTML=e,l.append(t)})),t.append(l)}if(e.content.specs){let l=this.templates.content.cloneNode(!1);l.classList.add("specs"),e.content.specs.forEach((e=>{let t=i(e.name,e.text);l.innerHTML+=t})),t.append(l)}this.el.append(t);let r={};r.title=l,r.content={block:t.querySelector(".spoiler__content"),height:t.querySelector(".spoiler__content").offsetHeight},this.content.push(r)})),t()}))}getTemplates(){let e={};e.spoilerItem=this.el.querySelector(".spoiler__item"),e.title=this.el.querySelector(".spoiler__title"),e.content=this.el.querySelector(".spoiler__content"),e.content.removeAttribute("data-spbl-render"),this.templates=e;for(let t in e)this.templates[t].remove()}setHandlers(){let e=!1;(this.el.hasAttribute("data-is-accordeon")||this.el.closest("[data-is-accordeon]"))&&(e=!0),this.content.forEach((t=>{n=n.bind(this);let l=t.title,r=t.content;function n(){let t=l.classList.contains("__active");e?t?this.closeAllSpoilers():(this.closeAllSpoilers(),this.toggleSpoiler(l,r).show()):t?this.toggleSpoiler(l,r).hide():this.toggleSpoiler(l,r).show()}l.addEventListener("click",n)})),this.closeAllSpoilers()}toggleSpoiler(e,t){let l=t.block;t.height;return{show:function(){e.classList.add("__active"),l.style.maxHeight=1.5*t.height+"px",l.style.removeProperty("padding"),l.style.removeProperty("margin")},hide:function(){e.classList.remove("__active"),l.style.cssText="\n                max-height: 0px;\n                padding: 0;\n                margin: 0 0 5px 0;\n            "}}}closeAllSpoilers(){this.content.forEach((e=>{this.toggleSpoiler(e.title,e.content).hide()}))}setReplace(e){let t=this.replaceToggler.bind(this);t(e),e.addEventListener("change",t)}replaceToggler(e){e.matches&&(this.spoilerBlock.innerHTML="",this.spoilerBlock.append(this.el))}}function i(e,t){return`\n        <div class="specs__item">\n            <div class="specs__name">${e}</div>\n            <div class="specs__content">${t}</div>\n        </div>\n    `}let s=new class{constructor(){if(this.spoilerBlocks=Array.from(document.querySelectorAll("[data-spoiler]:not([data-inside-app])")),this.spoilerBlocks.length>0){this.sortSrcs().forEach((e=>this.initLoading(e)))}}initSpoilerBlock(e){Array.from(e.querySelectorAll("[data-spoiler]")).forEach((e=>{const t=e.dataset.spoiler.split(", ")[1];this.initLoading(t,e)}))}initLoading(e,t=null){e&&fetch(e).then((e=>e.json())).then((l=>{this.loadContent(l,e,t)}))}sortSrcs(){let e=new Set;return this.spoilerBlocks.forEach((t=>{let l=t.dataset.spoiler.split(", ");e.add(l[1])})),Array.from(e)}loadContent(e,t,l=null){l&&this.renderSpoilerBlock(l,e),l||this.spoilerBlocks.forEach((l=>{l.dataset.spoiler.split(", ")[1]===t&&this.renderSpoilerBlock(l,e)}))}renderSpoilerBlock(e,t){let l=e.dataset.spoiler.split(", ")[0],i=window.matchMedia(`(max-width: ${l}px)`),s=new r(e,e.querySelector(".toggler"));s.render(t).then((()=>{s.setFirstActive(),s.setHandlers(),s.setReplace(i)}));let o=new n(e,e.querySelector(".spoiler"));o.render(t).then((()=>{o.setHandlers(),o.setReplace(i)}))}};function o(){let e=document.querySelectorAll(".devices-toggle");e.length>0&&e.forEach((e=>{let t=e.querySelectorAll(".devices-toggle__title"),l=e.querySelectorAll(".devices-toggle__product");function r(r){let n=e.querySelector(`.devices-toggle__product[data-devices-toggle="${r.dataset.devicesToggle}"]`);t.forEach((e=>{e.classList.remove("__active")})),l.forEach((e=>{e.classList.remove("__shown")})),r.classList.add("__active"),n.classList.add("__shown")}t.forEach((e=>{e.addEventListener("click",(function(){r(e)}))})),e.querySelector(".devices-toggle__title.__active")||r(t[0])}))}function a(){let e=document.querySelectorAll(".controls");e.length>0&&e.forEach((e=>{e.querySelectorAll(".controls__amount").forEach((e=>{let t=e.querySelector(".controls__amount--number").querySelector("input");t.addEventListener("input",(function(){let e=t.value;t.value=e.replace(/\D/g,"")})),e.addEventListener("click",(function(e){e.target.classList.contains("controls__amount-button")&&!t.value&&(t.value=1),e.target.classList.contains("controls__amount--less")&&(t.value>0&&t.value--,t.value<=0&&(t.value=1)),e.target.classList.contains("controls__amount--more")&&(t.value.length<=t.maxLength&&t.value++,t.value.length>t.maxLength&&(t.value=1)),t.dispatchEvent(new Event("change"))}))}))}))}function c(e){let t=localStorage.getItem(e);return JSON.parse(t)}function d(e,t){t=JSON.stringify(t),localStorage.setItem(e,t)}function p(e=null,t=null){if(!e||!t){[["audiofree_cart","icon-circle--cart-icon"],["audiofree_favorites","icon-circle--favorites-icon"]].forEach((r=>{e=r[0],t=r[1],l(e,t)}))}function l(e,t){let l=c(e);if(l){let e=l.length,r=document.querySelectorAll(`.${t}`);if(e>0){let t=document.createElement("div");t.className="icon-circle__number",t.innerHTML=e,r.forEach((e=>{let l=e.querySelector(".icon-circle__number");l&&l.remove(),e.append(t)}))}else r.forEach((e=>{let t=e.querySelector(".icon-circle__number");t&&t.remove()}))}}e&&t&&l(e,t)}!function(){let e=document.querySelectorAll("[data-dynamic-adaptive]"),t=[],l=[];function r(e,t){t.forEach((t=>{if(e.matches){let e;if(t.isUnique)e=document.querySelector(`.${t.newParentClass}`);else{e=t.oldParent.querySelector(`.${t.newParentClass}`);let l=t.oldParent.parentNode;for(;!e;)l=l.parentNode,e=l.querySelector(`.${t.newParentClass}`)}n(e,t,t.insertType[0])}else n(t.oldParent,t,t.insertType[1])}))}function n(e,t,l){if("prepend"===l)e.prepend(t.obj);else e.append(t.obj)}e.forEach((e=>{let r=e.dataset.dynamicAdaptive.split(", "),n=r[0];n||(n="max");let i=`(${n}-width: ${r[1]}px)`;l.push(i);let s=e.dataset.insertType;s?(s=s.split(", "),1==s.length&&s.push("append")):s=["append","append"];let o={};o.obj=e,o.insertType=s,o.media=i,o.oldParent=e.parentNode,o.newParentClass=r[2],o.isUnique=r[3],r[3]||(o.isUnique=!1),t.push(o)})),l=l.filter(((e,t,l)=>l.indexOf(e)===t)),l.forEach((e=>{let l=window.matchMedia(e),n=t.filter((t=>t.media==e));r(l,n),l.addEventListener("change",(function(){r(l,n)}))}))}(),a(),function(){let e=document.querySelectorAll(".table");e.length>0&&e.forEach((e=>{let t=0,l=0,r=e.querySelectorAll(".table__column");r.forEach((e=>{let r=e.querySelectorAll(".table__cell");r.length>t&&(t=r.length),r.forEach((e=>{e.offsetHeight>l&&(l=e.offsetHeight)}))})),r.forEach((e=>{let l=e.querySelectorAll(".table__cell").length;for(;l<t;){let t=document.createElement("div");t.className="table__cell",e.append(t),l++}}));let n=e.dataset.clearEmptyCells;n||(n=499);let i=window.matchMedia(`(max-width: ${n}px)`);function s(t){let l=e.querySelectorAll(".table__cell");t.matches&&l.forEach((e=>{e.innerHTML||(e.style.display="none")})),t.matches||l.forEach((e=>{e.style.removeProperty("display")}))}function o(){e.querySelectorAll(".table__cell").forEach((e=>{i.matches?e.style.flexBasis="auto":e.style.flexBasis=`${l}px`}))}s(i),i.addEventListener("change",(function(){s(i)})),o(),window.addEventListener("resize",o)}))}(),p(),function(){function e(e,t=null){let l=e.querySelector(".select__option--selected");l||(l=e.querySelector(".select__option"),l.classList.add("select__option--selected")),t&&(l.classList.remove("select__option--selected"),t.classList.add("select__option--selected")),l=e.querySelector(".select__option--selected"),selectedText=l.innerText||l.textContent,e.querySelector(".select__selected").innerHTML=selectedText}document.querySelectorAll(".select").forEach((t=>{!function(e){let t=e.querySelector(".select__selected");t||(t=document.createElement("div"),t.className="select__selected",e.prepend(t))}(t),function(t){t.addEventListener("click",(function(l){l.preventDefault(),t.classList.toggle("__active"),l.target.classList.contains("select__option")&&e(t,l.target)}))}(t),e(t)}))}(),document.querySelectorAll(".price-range").forEach((e=>{!function(e){let t,l=e.querySelector(".price-range__scale"),r=e.querySelector("[data-max-price-value]");t=r?r.dataset.maxPriceValue:"9999",e.querySelectorAll(".price-range__input").forEach((r=>{r.maxLength=t.length,r.addEventListener("input",(function(e){r.value,r.value=r.value.replace(/\D/g,"")})),r.addEventListener("change",(function(){let n,s;r.classList.contains("price-range__input--min")&&(n=e.querySelector(".price-range__input--max"),r.value&&!n.value&&(n.value=parseInt(t)),r.value&&parseInt(r.value)>parseInt(n.value)&&(r.value=n.value),s=e.querySelector(".price-range__toggle--min")),r.classList.contains("price-range__input--max")&&(n=e.querySelector(".price-range__input--min"),r.value&&!n.value&&(n.value=0),r.value&&parseInt(r.value)<parseInt(n.value)&&(r.value=n.value),s=e.querySelector(".price-range__toggle--max")),r.value&&r.value>parseInt(t)&&(r.value=parseInt(t)),r.value&&(r.value=parseInt(r.value));let o=Math.round(parseInt(t)/(l.clientWidth-s.offsetWidth)),a=parseInt(r.value)/o;s.style.left=`${a}px`,i(e)}))}));let n=e.querySelectorAll(".price-range__toggle");function i(e){let t=e.querySelector(".price-range__toggle--min"),l=e.querySelector(".price-range__toggle--max"),r=e.querySelector(".price-range__bar"),n=parseInt(t.style.left),i=parseInt(l.style.left);r.style.width=i-n+"px",r.style.left=`${n}px`}function s(r){let n,i=Math.round(parseInt(t)/(l.clientWidth-r.offsetWidth));r.classList.contains("price-range__toggle--min")&&(n=e.querySelector(".price-range__input--min")),r.classList.contains("price-range__toggle--max")&&(n=e.querySelector(".price-range__input--max")),n.value=i*parseInt(r.style.left)}function o(){i(e),s(n[0]),s(n[1]),n.forEach((e=>{let t=l.clientWidth-e.offsetWidth;e.classList.contains("price-range__toggle--min")&&(e.style.left="0px"),e.classList.contains("price-range__toggle--max")&&(e.style.left=`${t}px`)}))}n.forEach((e=>{let t=l.clientWidth-e.offsetWidth,r=e.classList.contains("price-range__toggle--min"),n=e.classList.contains("price-range__toggle--max");r&&(e.style.left=0),n&&(e.style.left=`${t}px`),e.ondragstart=function(){return!1}})),e.addEventListener("pointerdown",(function(t){let r=e.querySelector(".price-range__toggle--min"),n=e.querySelector(".price-range__toggle--max"),o=l.clientWidth-r.offsetWidth;if(t.target.classList.contains("price-range__scale")||t.target.classList.contains("price-range__bar")){t.preventDefault();let l=t.clientX-e.getBoundingClientRect().left,c=(parseInt(r.style.left)+parseInt(n.style.left))/2,d=r.offsetWidth/2;function a(e){let t=l-d;t<0&&(t=0),t>o&&(t=`${o}px`),e.style.left=`${t}px`}l<c&&(a(r,n),s(r)),l>=c&&(a(n,r),s(n)),i(e)}function c(t,l){let r,n=l-t.getBoundingClientRect().left;function a(l){l.preventDefault(),d(l.clientX,t,r),i(e),s(t)}function c(){document.removeEventListener("pointermove",a),document.removeEventListener("pointerup",c)}function d(t,l,r){let i=t-n-e.getBoundingClientRect().left;i<0&&(i=0),i>o&&(i=`${o}px`);let s=parseInt(r.style.left);(l.classList.contains("price-range__toggle--min")&&i>s||l.classList.contains("price-range__toggle--max")&&i<s)&&(i=`${s}px`),l.style.left=`${i}px`}t.classList.contains("price-range__toggle--min")&&(r=e.querySelector(".price-range__toggle--max")),t.classList.contains("price-range__toggle--max")&&(r=e.querySelector(".price-range__toggle--min")),document.addEventListener("pointermove",a),document.addEventListener("pointerup",c)}t.target.classList.contains("price-range__toggle")&&c(t.target,t.clientX)})),o(),window.addEventListener("resize",o)}(e)})),document.querySelectorAll(".filter__clear-button").forEach((e=>{e.addEventListener("click",(function(){let t=e.closest(".filter");t.querySelectorAll('input[type="checkbox"]').forEach((e=>{e.checked=!1})),t.querySelectorAll(".price-range").forEach((e=>{e.querySelectorAll(".price-range__input").forEach((e=>{e.value=""}));let t=e.querySelector(".price-range__scale");e.querySelector(".price-range__toggle--min").style.left=0;let l=e.querySelector(".price-range__toggle--max");l.style.left=t.clientWidth-l.offsetWidth+"px";let r=e.querySelector(".price-range__bar");r.style.width=`${t.clientWidth}px`,r.style.left=0}))}))}));let u={createPopup:function(e,t=5750){let l=document.createElement("div");l.className="popup card",t<=0&&l.classList.add("popup--hold"),l.innerHTML=`\n        <div class="card__bottom card__side popup__bottom"></div>\n        <div class="card__container card__side popup__container">\n            <div class="popup__cancel">\n                <div class="popup__cancel--button"></div>\n            </div>\n            ${e}\n        </div>\n        `;let r=document.querySelector(".wrapper"),n=l.querySelector(".popup__cancel");if(t>0){r.querySelectorAll(".popup").forEach((e=>{u.removePopup(e)})),setTimeout((()=>{u.removePopup(l)}),t),n.addEventListener("click",(function(){u.removePopup(l)}))}t<=0&&n.addEventListener("click",(function(){u.removePopupNoTimer(l)})),r.append(l),setTimeout((()=>{l.style.transform="translate(0, -20%)"}),100)},removePopup:function(e){e&&e.classList.contains("popup")&&!e.classList.contains("popup--hold")&&(e.style.transform="translate(150%, -20%)",e.addEventListener("transitionend",(function(){e.remove()})))},removePopupNoTimer:function(e){e.style.transform="translate(-150%, -20%)",e.addEventListener("transitionend",(function(){e.remove()}))},createNote:function(e){return`\n            <p class="popup__note">\n                ${e}\n            </p>\n        `}};function h(){new Swiper(".pagination-slider",{slideClass:"pagination-slide",wrapperClass:"pagination-slider__wrapper",loop:!0,draggable:!0,effect:"flip",observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},pagination:{el:".swiper-pagination",clickable:!0}});new Swiper(".mobile-slider",{wrapperClass:"mobile-slider__wrapper",slideClass:"mobile-slider__slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},breakpoints:{500:{slidesPerView:2}}}),document.querySelectorAll("[data-mobile-slider]").forEach((e=>{e.swiper.disable();let t=e.dataset.mobileSlider.split(", "),l=t[0],r=t[1],n=e.querySelector(".mobile-slider__wrapper"),i=n.childNodes;i=Array.from(i).filter((e=>{if("3"!=e.nodeType&&"#text"!=e.nodeName&&!e.dataset.dynamicAdaptive)return e.classList.add("mobile-slider__slide"),e}));let s=window.matchMedia(`(${l}-width: ${r}px)`);function o(t){if(t.matches){e.swiper.enable(),n.style.flexWrap="nowrap";let t=e.querySelector(".icon-circle--slider");t||(t=document.createElement("div"),t.classList.add("icon-circle","icon-circle--slider"),t.innerHTML='\n          <div class="icon-circle__item __icon-slider-hand"></div>\n        ',e.append(t),t.addEventListener("click",(function(){e.swiper.slideNext()}))),t.style.display="flex"}else{e.swiper.disable(),n.style.flexWrap="wrap";let t=e.querySelector(".icon-circle--slider");t&&t.remove()}}s.addListener(o),o(s)}));new Swiper(".tape-slider",{wrapperClass:"tape-slider__wrapper",slideClass:"tape-slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}},breakpoints:{640:{slidesPerView:2},940:{slidesPerView:3},1260:{slidesPerView:4},1800:{slidesPerView:5}}}),new Swiper(".prodpage-slider",{wrapperClass:"prodpage-slider__wrapper",slideClass:"prodpage-slider__slide",slidesPerView:1,observer:!0,observeParents:!0,observeSlideChildren:!0,on:{observerUpdate(e){e.update()}}})}let m="audiofree_cart",g="audiofree_cart_oneclick",_="audiofree_favorites",f="audiofree_total_price";if([m,g,_].forEach((e=>{let t=c(e);Array.isArray(t)||(t=[],d(e,t))})),document.querySelector("#products-app")){const t=document.querySelector("#products-app"),l={data:()=>({products:e,favorites:c(_),imageViewingMedia:"slider",totalRatingAmount:5}),mounted(){s.initSpoilerBlock(t),h(),this.setFavorite(),this.imageViewingMediaChange(),document.querySelector(".product-page")&&this.setCurrentImage(),setTimeout((()=>{a(),o()}),0)},methods:{openCardIcons(e){let t=e.target.parentNode,l=t.nextElementSibling;t.classList.toggle("__active"),l.classList.toggle("__active")},imageViewingMediaChange(){let e=window.matchMedia("(max-width: 849px)");function t(){e.matches?this.imageViewingMedia="slider":this.imageViewingMedia="usual"}t=t.bind(this),e.addEventListener("change",t),t()},renderRating(e){let t=this.products[e];t||(t={});let l=[];for(let e=0;e<t.rating;e++)l.push(e);let r=[];for(let e=0;e<this.totalRatingAmount-t.rating;e++)r.push(e);return{activeStars:l,emptyStars:r}},addToCart(e,t,l=!1){let r;if(l){if(l){let t=document.querySelector(".product-block");r={},r.vendorCode=e,t.querySelectorAll("[data-option-name]").forEach((e=>{let t,l=e.dataset.optionName,n=e.querySelector("input");"text"==n.type&&(t=n.value),"radio"==n.type&&(n=e.querySelector("input:checked"),t=n.value),r[l]=t}))}}else{r={},r.vendorCode=e,r.amount="1";let t=this.products[e].options;for(let e in t)r[e]=t[e].list[0]}if("cart"==t){let e=c(m);e||(e=[]),e.push(r),d(m,e),p();let t=`\n                            ${u.createNote("Товар добавлен в корзину.")}\n                            ${u.createNote('<a href="../html-products/cart.html">Перейти</a>')}\n                        `;u.createPopup(t)}if("oneClick"==t){let e=c(g);e=[],e.push(r),d(g,e)}},toggleFavorites(e){let t=e.target.closest("[data-vendor-code]").dataset.vendorCode,l=c(_),r=l.indexOf(t);if(-1!=r){l.splice(r,1);let e=`\n                        ${u.createNote('Товар <span class="bold-text">'+this.products[t].name+"</span> удалён из избранного")}\n                        `;u.createPopup(e,3e3)}if(r<0){l.push(t);let e=`\n                        ${u.createNote('Товар <span class="bold-text">'+this.products[t].name+"</span> добавлен в избранное")}\n                        ${u.createNote('<a href="../html-products/favorites.html">Перейти</a>')}\n                        `;u.createPopup(e,3e3)}d(_,l),this.favorites=c(_),this.setFavorite(),p()},setFavorite(){for(let e in this.products){let t=this.products[e],l=!1;this.favorites.forEach((t=>{t==e&&(l=!0)})),t.isFavorite=l}},setCurrentImage(e=null){"usual"==this.imageViewingMedia&&setTimeout((()=>{let t,l,r=document.querySelector(".product-block[data-vendor-code]"),n=r.querySelectorAll(".small-image"),i=r.dataset.vendorCode;t=e?e.target:n[0].querySelector("img"),l=t.src,this.products[i]["image-current"]=l,n.forEach((e=>{e.classList.remove("__active")})),t.parentNode.classList.add("__active")}),100)}}};Vue.createApp(l).mount("#products-app")}if(document.querySelector("#cart-app")){document.querySelector("#cart-app");const t={data:()=>({products:e,cart:c(m),cart_oneclick:c(g),totalPrice:c(f),cartIsEmpty:c(m).length<=0}),mounted(){this.refreshData(),h(),a()},methods:{refreshData(){!function(){let t=c(f);t||(t=0,d(f,t));let l=document.querySelector(".cart-page");if(l){let t=0,r=[];r=l.classList.contains("cart-page--oneclick")?c(g):c(m),r.forEach((l=>{let r=e[l.vendorCode].price*l.amount;t+=r})),d(f,t)}}(),p(),this.cart=c(m),this.cart_oneclick=c(g),this.totalPrice=c(f),this.cartIsEmpty=c(m).length<=0},delFromCart(e){let t=e.target,l=t.closest(".cart-list__item"),r=t.closest("[data-cart-item-number]").dataset.cartItemNumber,n=c(m);n.splice(r,1),d(m,n),this.refreshData();let i=l.querySelector("[data-cart-item-name]").dataset.cartItemName,s=`\n                    ${u.createNote('Товар <span class="bold-text">'+i+"</span> удалён из корзины.")}\n                    `;u.createPopup(s,2e3)},amountChange(e){let t,l=e.target,r=l.value,n=l.closest("[data-cart-item-number]").dataset.cartItemNumber;if(t=l.closest(".cart-page").classList.contains("cart-page--oneclick")?"oneClick":"cart","cart"==t){let e=c(m);e[n].amount=r,d(m,e)}else{let e=c(g);e[n].amount=r,d(g,e)}this.refreshData()}}};Vue.createApp(t).mount("#cart-app")}}));