function checkWebpSupport(){return new Promise(((e,t)=>{let n=new Image;n.onload=function(){e(document.querySelector("body").classList.add("webp"))},n.onerror=function(){t(document.querySelector("body").classList.remove("webp"))},n.src="img/check-webp/check.webp"}))}checkWebpSupport();class Video{constructor(){this.initVideoInNode(document)}initVideoInNode(e=document){setTimeout((()=>{e.querySelectorAll(".video-container").forEach((e=>this.initControls(e)))}),0)}setControls(e){let t=e.querySelector(".video-container__controls");const n={playBtn:"video-container__play-btn",expandBtn:"video-container__expand",timestamp:"video-container__timestamp",videotrack:"video-container__videotrack",timeline:"video-container__timeline",timelineSlider:"video-container__timeline-slider"};if(t||o(),t){let e=!0;for(let o in n){const i=n[o];t.querySelector(i)||(e=!1)}e||(t.remove(),o())}function o(){t=document.createElement("div"),t.className="video-container__controls",t.innerHTML=`\n                <div class="${n.playBtn}"></div>\n                <div class="${n.expandBtn}"></div>\n                <div class="${n.timestamp}">\n                    <span></span>\n                    <span></span>\n                </div>\n                <div class="${n.videotrack}">\n                    <div class="${n.timeline}">\n                        <div class="${n.timelineSlider}"></div>\n                    </div>\n                </div>\n            `,e.append(t)}return{video:e.querySelector("video"),node:t,playBtn:t.querySelector(`.${n.playBtn}`),expandBtn:t.querySelector(`.${n.expandBtn}`),timestamp:t.querySelector(`.${n.timestamp}`),videotrack:t.querySelector(`.${n.videotrack}`),timeline:t.querySelector(`.${n.timeline}`),timelineSlider:t.querySelector(`.${n.timelineSlider}`)}}initControls(e){const t=this.setControls(e);this.initPlayingToggle(t),this.initVideotrack(t),this.initExpandBtn(t),this.initTimestamp(t),this.toggleControlsOnHover(t)}play(e){e.closest(".video-container").classList.add("__playing"),e.play(),e.loop||(e.loop=!0)}pause(e){e.closest(".video-container").classList.remove("__playing"),e.pause()}initPlayingToggle(e){const t=e.node.closest(".video-container"),n=e.video;function o(o){const i=t.classList.contains("__playing");o.target!==e.node&&o.target!==e.playBtn||(i?this.pause(n):this.play(n))}o=o.bind(this),e.node.addEventListener("click",o)}initVideotrack(e){const t=e.videotrack,n=e.timeline,o=(e.timelineSlider,e.video);function i(){function e(e){const i=(e.clientX-getCoords(t).left)/t.offsetWidth*100;i>1&&i<=100&&(n.style.width=`${i}%`,o.currentTime=o.duration/100*i),i>100&&(n.style.width="100%"),i<1&&(n.style.width="1%")}function i(t){function n(t){t.preventDefault(),e(t)}this.pause(o),document.addEventListener("pointermove",n),document.addEventListener("pointerup",(function e(){document.removeEventListener("pointermove",n),document.removeEventListener("pointerup",e)}))}i=i.bind(this),t.addEventListener("click",e),t.addEventListener("pointerdown",i),t.ondragstart=function(){return!1}}o.addEventListener("timeupdate",(function(){n.style.width=o.currentTime/o.duration*100+"%"})),(i=i.bind(this))()}initExpandBtn(e){const t=e.node.closest(".video-container"),n=e.expandBtn,o=e.video;!function(){let e=!1;function i(){o.closest(".popup")||new Popup({content:[{type:"htmlElement",body:t,oldParent:t.parentNode}]})}t.onclick=function(n){const o=t.querySelector(".video-container__controls"),s=t.querySelector(".video-container__play-btn");if(n.target===o||n.target===s){if(e&&(t.closest(".popup")||i(),t.closest(".popup"))){const e=document.querySelector(".popup__body"),t=new Event("click",{bubbles:!0});e.dispatchEvent(t)}e=!0,setTimeout((()=>{e=!1}),250)}},n.addEventListener("click",i)}()}initTimestamp(e){const t=e.video,n=e.timestamp;function o(){const e=n.querySelectorAll("span"),o=e[0],i=e[1];let s=Math.floor(Math.floor(t.currentTime)/60)||0,r=Math.floor(t.currentTime)-60*s||0;s=s.toString(),r=r.toString(),s.length<=1&&(s=`0${s}`),r.length<=1&&(r=`0${r}`);let l=Math.floor(Math.floor(t.duration)/60)||0,c=Math.floor(t.duration)-60*l||0;l=l.toString(),c=c.toString(),l.length<=1&&(l=`0${l}`),c.length<=1&&(c=`0${c}`),o.innerHTML=`${s}:${r}`,i.innerHTML=`${l}:${c}`}o(),t.addEventListener("timeupdate",o)}toggleControlsOnHover(e){const t=e.node.closest(".video-container");function n(){t.classList.remove("__hover")}t.onpointerover=function(e){t.classList.add("__hover"),"mouse"!=e.pointerType&&setTimeout((()=>{n()}),1e3)},t.onmouseleave=n}}class Images{constructor(){this.initImagesInNode(document)}initImagesInNode(e=document){setTimeout((()=>{e.querySelectorAll(".image-container").forEach((e=>this.initContainer(e)))}),0)}initContainer(e){this.initExpandBtn(e)}initExpandBtn(e){!function(){let t=e.querySelector(".image-container__expand");t||(t=document.createElement("div"),t.className="image-container__expand",e.append(t))}(),e.onclick=function(){e.closest(".popup")||new Popup({content:[{type:"htmlElement",body:e,oldParent:e.parentNode}]})}}}const videoMethods=new Video,imageMethods=new Images;function setAboutInfo(){const e={worksAmount:{span:document.querySelector("#about__works-amount"),infoText:""},jsFeaturesAmount:{span:document.querySelector("#about__js-features"),infoText:""}};function t(){for(let t in e){const n=e[t];n.span.innerHTML=n.infoText}}return t(),{setInfo:function(n,o){"string"!=typeof n&&(n=n.toString()),e[n].infoText=o.toString(),t()}}}const aboutBlockInfo=setAboutInfo();function toggleScroll(){let e=document.querySelector("body"),t=[];["page-block","__padding-elem"].forEach((e=>{document.querySelectorAll(`.${e}`).forEach((e=>{t.push(e)}))})),e.classList.contains("__no-scroll")?(e.classList.remove("__no-scroll"),t.forEach((e=>{e.style.removeProperty("padding-right")}))):(e.classList.add("__no-scroll"),t.forEach((t=>{t.style.paddingRight=`${function(){let t=document.createElement("div");t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",e.append(t);let n=t.offsetWidth-t.clientWidth;return t.remove(),n}()}px`})))}function capitalLetter(e){if(!e)return;return`${e.slice(0,1).toUpperCase()}${e=e.slice(1,e.length)}`}function changeThemeImages(){let e=document.querySelectorAll("[data-theme-image]"),t=document.querySelector("body");e.length>0&&e.forEach((e=>{let n=e.parentNode.querySelector("source"),o=e.dataset.themeImage.split("."),i=o[0],s=o[1];t.classList.contains("__dark-theme")?(e.src=`${i}--dark.${s}`,n&&(n.srcset=e.src)):(e.src=e.dataset.themeImage,n&&(n.srcset=e.src))}))}function getCoords(e){let t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}function initSpoilerElem(e,t,n){const o="__spoiler-shown";n.style.removeProperty("max-height");const i=n.offsetHeight;function s(){t.classList.contains(o)?r():(t.classList.add(o),n.style.cssText=`max-height: ${1.5*i}px;`,n.style.removeProperty("padding"))}function r(){t.classList.remove(o),n.style.cssText="\n            max-height: 0px;\n            padding: 0px;\n        "}r(),e.removeEventListener("click",s),e.addEventListener("click",s)}function initSelects(e=null){let t;function n(){document.querySelectorAll(".select.__active").forEach((e=>{e.classList.remove("__active")}))}t=e?e.querySelectorAll(".select"):document.querySelectorAll(".select"),t.forEach((e=>function(e){function t(){let t=e.querySelector(".select__value"),o=e.querySelector("input:checked");t||(t=document.createElement("div"),t.className="select__value",e.append(t)),o||(o=e.querySelector('input[type="radio"]'),o.checked=!0),t.innerHTML=o.parentNode.querySelector("p").innerHTML,n()}function o(){const o=e.querySelector(".select__value");function i(){const e=o.closest(".select");e.classList.contains("__active")?n():(n(),e.classList.add("__active"))}o.addEventListener("click",i),e.addEventListener("change",t)}t(),o()}(e))),e||document.addEventListener("click",(function(e){e.target.classList.contains(".select")||e.target.closest(".select")||n()}))}function initFilters(e=null){let t;t=e?e.querySelectorAll(".filter"):document.querySelectorAll(".filter"),t.forEach((e=>initFilter(e)))}function initFilter(e){const t=e.querySelector(".filter__title"),n=e.querySelector(".filter__body");initSpoilerElem(t,e,n)}initSelects(),initFilters();class Storage{constructor(){}getItem(e){return JSON.parse(localStorage.getItem(e))}setItem(e,t){t=JSON.stringify(t),localStorage.setItem(e,t)}}class Header{constructor(e){this.header=e,this.fix(),this.padding(),this.initTogglingMenu(),this.changeTheme(),this.initNavButtons()}fix(){let e=this.header;function t(){let t=e.offsetHeight;window.pageYOffset>t?e.classList.add("__fixed"):e.classList.remove("__fixed")}t(),window.addEventListener("scroll",t)}padding(){let e=this.header,t=document.querySelector(".page-block"),n=e.offsetHeight+40;t.style.paddingTop=`${n}px`}initTogglingMenu(){let e=this.header;const t=this.toggleMenu.bind(this);e.querySelector(".burger").addEventListener("click",t)}toggleMenu(e=null){let t=this.header,n=t.querySelector(".burger"),o=t.querySelector(".header__menu");function i(){n.classList.add("__active"),o.classList.add("__active")}function s(){n.classList.remove("__active"),o.classList.remove("__active")}n.classList.contains("__active")?s():i(),"open"===e&&i(),"close"===e&&s()}changeTheme(){let e=new Storage,t="an_portfolio_theme",n=e.getItem(t);n||(n="light",e.setItem(t,n));let o=document.querySelectorAll(".theme-change"),i=document.querySelector("body");function s(n){let o=document.querySelectorAll(".theme-change__button.__icon-sun"),s=document.querySelectorAll(".theme-change__button.__icon-moon");"light"==n&&(o.forEach((e=>{e.classList.add("__selected")})),s.forEach((e=>{e.classList.remove("__selected")})),i.classList.remove("__dark-theme"),e.setItem(t,"light")),"dark"==n&&(s.forEach((e=>{e.classList.add("__selected")})),o.forEach((e=>{e.classList.remove("__selected")})),i.classList.add("__dark-theme"),e.setItem(t,"dark")),changeThemeImages()}s(n),o.forEach((e=>{e.addEventListener("click",(function(e){e.target.classList.contains("__icon-sun")&&s("light");e.target.classList.contains("__icon-moon")&&s("dark")}))}))}initNavButtons(e=document){if(e.querySelectorAll('[href*="#"]').forEach((e=>{e.addEventListener("click",this.navBtnOnClick.bind(this))})),e===document){const e=this.header.querySelectorAll(".header__link-button");let t;function n(){e.forEach((n=>{const i=n.getAttribute("href"),s=document.querySelector(i);if(t!==s){const i=getCoords(s).top;window.pageYOffset>=i-100&&window.pageYOffset<s.offsetHeight+(i-100)&&(e.forEach((e=>{e.closest(".header__link").classList.remove("__selected")})),o(n),t=s)}}))}function o(e){e.closest(".header__link").classList.add("__selected")}n(),window.addEventListener("scroll",n)}}navBtnOnClick(e){e.preventDefault();const t=e.target.getAttribute("href");document.querySelector(t).scrollIntoView({behavior:"smooth"}),this.toggleMenu("close")}}let headerMethods=new Header(document.querySelector(".header"));class Popup{constructor(e){this.message=e,this.body=document.querySelector("body"),this.wrapper=document.querySelector(".wrapper"),this.renderBackground()}createBlock(e,t){let n=document.createElement(e);return n.className=t,n}renderBackground(){toggleScroll();let e=document.querySelectorAll(".popup"),t=this.createBlock("div","popup");if(e.length>0){let n=!1;e.forEach((e=>{e.classList.contains("popup--colored")&&(n=!0)})),n||e[0].classList.add("popup--colored"),this.wrapper.append(t),this.toUnite(t)}else this.wrapper.append(t),setTimeout((()=>{t.classList.add("popup--colored"),this.toUnite(t)}),0)}renderBody(){let e=this.message,t=this.createBlock("div","popup__body"),n=this.createBlock("div","popup__title");return e.title?n.innerHTML=e.title:n.style.display="none",t.append(n),e.content&&e.content.length>0&&e.content.forEach((e=>{let n=this.createBlock("div","popup__content");if("text"==e.type){function o(){n.classList.add("popup__list");for(let t=0;t<e.body.length;t++){const o=e.body[t];let i=this.createBlock("li","popup__item");i.innerHTML=`${t+1}. ${o}`,n.append(i)}}function i(){n.classList.add("popup__paragraph"),n.innerHTML=e.body||""}t.classList.add("popup__body--tablet"),o=o.bind(this),i=i.bind(this),Array.isArray(e.body)?o():i()}"htmlElement"==e.type&&(t.classList.add("popup__body--element"),n.classList.add("popup__element"),n.append(e.body)),e.body&&t.append(n)})),t}toUnite(e){let t=this.renderBody();function n(o){(o.target.classList.contains("popup")||o.target.classList.contains("popup__body--element"))&&"VIDEO"!=o.target.tagName&&"IMG"!=o.target.tagName&&(this.removePopup(e,t),e.removeEventListener("click",n))}e.append(t),setTimeout((()=>{t.style.transform="translate(0, 0)"}),150),n=n.bind(this),e.addEventListener("click",n)}removePopup(e,t){let n=this.message;function o(){t.style.transform="translate(100vw, 0)",t.addEventListener("transitionend",(function(){e.remove(),n.content.forEach((e=>{"htmlElement"==e.type&&e.oldParent&&e.oldParent.append(e.body)}))}))}e.classList.contains("popup--colored")?(toggleScroll(),e.classList.remove("popup--colored"),o()):o()}}class ScrollAnim{constructor(){this.timeoutDflt=75,this.initAllObjs(),window.addEventListener("scroll",(()=>this.initAnimObjs()))}initAllObjs(e=document){this.initAnimObjs(e),this.initTextNodes(e)}initAnimObjs(e=document){e.querySelectorAll('[class*="anim__object"]:not([v-cloak])').forEach((e=>this.initAnimObj(e)))}initTextNodes(e=document){e.querySelectorAll('[class*="anim__object-text"]:not([v-cloak])').forEach((e=>this.initTextTyping(e)))}initAnimObj(e){let t=getCoords(e),n=e.offsetHeight,o=(window.pageYOffset,window.innerHeight-window.innerHeight/5);window.pageYOffset>t.top-o&&window.pageYOffset<n+t.top?e.classList.add("__animated"):e.classList.contains("__unlock-anim")&&e.classList.remove("__animated")}initTextTyping(e){this.saveTextContent(e);const t=e.classList.contains("__animated");if(!t){const t=new MutationObserver(function(e){e.forEach((e=>{const t=e.target;if("class"===e.attributeName&&e.oldValue){const n=!e.oldValue.split(" ").includes("__animated"),o=t.classList.contains("__animated");n&&o&&this.type(t)}}))}.bind(this));t.observe(e,{attributes:!0,attributeOldValue:!0})}t&&this.type(e)}type(e){e.textContent;const t=e.dataset.textContent,n=e.dataset.typingSpeed;if("true"!==e.dataset.isTyping){e.dataset.isTyping="true",e.textContent="";const o=t.replace(/\s\s/g,"").split("");for(let t=0;t<o.length;t++){let i=0;i=n?n*t:this.timeoutDflt*t;const s=o[t];setTimeout((()=>{e.textContent+=s,t===o.length-1&&(e.dataset.isTyping="false")}),i)}}}saveTextContent(e){e.dataset.textContent||(e.dataset.textContent=e.textContent),e.textContent=""}}const scrollAnim=new ScrollAnim,worksAppId="#works-block",worksAppBlock=document.querySelector(worksAppId),WorksApp={data:()=>({worksSrc:[],works:[],filterLists:[],filterStrings:[],filtersChosen:[],filterUpdater:!1}),created(){this.previewPlatformByMedia()},mounted(){fetch("js/JSON/works.json").then((e=>e.json())).then((e=>{aboutBlockInfo.setInfo("worksAmount",e.length);let t=this.modifyData(e);this.worksSrc=t,this.works=t,this.initFilterBlock(),this.previewPlatformByMedia(),scrollAnim.initAllObjs(worksAppBlock),headerMethods.initNavButtons(worksAppBlock)}))},beforeUpdate(){this.filterUpdater||(!function(){const e=document.querySelector(worksAppId).querySelector(".filter__body");if(e){new MutationObserver((e=>{initFilters(document.querySelector(worksAppId))})).observe(e,{childList:!0,subtree:!0,charactedData:!0})}}(),this.filterUpdater=!0)},methods:{modifyData(e){let t=e;return t.forEach((e=>{e.showFeature=!1})),t},initFilterBlock(){this.initFilterData(),this.initSortData()},initFilterData(){const e=this.filterLists,t=this.filterStrings,n=this.worksSrc;this.filtersChosen;const o=worksAppBlock.querySelector(".filter__body");function i(){let i=n.slice();if(!o.querySelector("input:checked"))return this.works=n,void(this.filtersChosen=[]);o.querySelectorAll("input:not([value]):checked").forEach((t=>{const n=t.nextElementSibling.innerText||t.nextElementSibling.textContent;e.forEach((e=>{i=i.filter((t=>t[e.keyName].indexOf(n)>=0))}))}));o.querySelectorAll("input[value]:checked").forEach((e=>{const n=e.value;t.forEach((e=>{i=i.filter((t=>t[e.keyName].toString()==n.toString()))}))})),this.works=i,(s=s.bind(this))()}function s(){const e=o.querySelectorAll("input:checked"),t=o.querySelectorAll("input:not(:checked)");e.forEach((e=>{const t=e.nextElementSibling.innerText||e.nextElementSibling.textContent;this.filtersChosen.indexOf(t)<0&&this.filtersChosen.push(t)})),t.forEach((e=>{const t=e.nextElementSibling.innerText||e.nextElementSibling.textContent,n=this.filtersChosen.indexOf(t);n>=0&&this.filtersChosen.splice(n,1)}))}!function(){const t={title:"По содержимому",keyName:"features",content:function(e){const t=[];return n.forEach((n=>{n[e].forEach((e=>{t.indexOf(e)<0&&t.push(e)}))})),t}("features")};e.push(t)}(),(i=i.bind(this))(),o.addEventListener("change",i)},initSortData(){initSelects(worksAppBlock);const e=worksAppBlock.querySelector(".filter-block"),t=worksAppBlock.querySelector(".filter-block__sort");function n(){const e=function(e){const n=t.querySelector('input[name="works-sort__order"]:checked').value;if("start"===n)return e;if("end"===n)return e.reverse()}((n=n.bind(this))());function n(){const e=t.querySelector('input[name="works-sort__type"]:checked').value;return"alphabet"===e?this.works.sort(((e,t)=>e.title.toUpperCase()>t.title.toUpperCase()?1:e.title.toUpperCase()<t.title.toUpperCase()?-1:0)):"workload"===e?this.works.sort(((e,t)=>e.features.length>t.features.length?1:e.features.length<t.features.length?-1:0)):void 0}this.works=e}(n=n.bind(this))(),e.addEventListener("change",n)},capitalLetter:capitalLetter,togglePlatform(e,t,n){if(t!==e.isDesktop&&!e.showFeature){let o=".5s",i=n.target.closest(".site-item").querySelector(".site-item__presentation");i.style.transition=`transform ${o} ease`,i.style.transform="rotate3d(1, 0, 0, 90deg)",i.addEventListener("transitionend",(function n(){setTimeout((()=>{e.isDesktop=t,i.style.removeProperty("transform"),i.removeEventListener("transitionend",n)}),100)}))}e.showFeature&&(e.isDesktop=t)},showFeature(e){e.showFeature=!e.showFeature},previewPlatformByMedia(){t=t.bind(this);let e=window.matchMedia("(max-width: 499px)");function t(){if(e.matches)for(let e=0;e<this.works.length;e+=1)this.works[e].isDesktop=!1;else for(let e=0;e<this.works.length;e+=2)this.works[e].isDesktop=!0}e.addEventListener("change",t),t()}}};Vue.createApp(WorksApp).mount(worksAppId);const featuresAppId="#features-block",featuresAppBlock=document.querySelector(featuresAppId),FeaturesApp={data:()=>({features:{},featuresGrouped:{}}),mounted(){fetch("js/JSON/features.json").then((e=>e.json())).then((e=>{const t=parseInt(e.video.length)+parseInt(e.images.length);aboutBlockInfo.setInfo("jsFeaturesAmount",t),this.features=e,this.groupToSlides(this.features),this.orientationByMedia(),videoMethods.initVideoInNode(featuresAppBlock),imageMethods.initImagesInNode(featuresAppBlock),scrollAnim.initAllObjs(featuresAppBlock),headerMethods.initNavButtons(featuresAppBlock)}))},updated(){videoMethods.initVideoInNode(featuresAppBlock),imageMethods.initImagesInNode(featuresAppBlock)},methods:{groupToSlides(e){const t={video:[],images:[]};let n=1;for(let n in t)t[n]=o(e[n]);function o(e){const t=[];for(let o=0;o<e.length;o+=2){const i={},s=e[o],r=e[o+1];i[n]=s,r&&(i[n+1]=r),t.push(i),n+=2}return t}this.featuresGrouped=t},initVideo(){initVideoImages(featuresAppBlock)},capitalLetter:capitalLetter,presentList(e){const t={title:"",content:[{type:"text"}]};e.examples.length<=0&&(t.title=`К сожалению, пока не добавлены сайты, где можно посмотреть <span class="__selected">${e.name}</span>`),1===e.examples.length&&(t.title=`<span class="__selected">${this.capitalLetter(e.name)}</span> можно посмотреть на следующем сайте:`,t.content[0].body=`<a href="${e.examples[0].url}">${e.examples[0].text}</a>`),e.examples.length>1&&(t.title=`<span class="__selected">${this.capitalLetter(e.name)}</span> можно посмотреть на следующих сайтах:`,t.content[0].body=[],e.examples.forEach((e=>{const n=`<a href="${e.url}">${e.text}</a>`;t.content[0].body.push(n)}))),new Popup(t)},orientationByMedia(){let e=document.documentElement.clientWidth,t=document.documentElement.clientHeight,n=e-t>=0,o=e-t<0;for(let e in this.featuresGrouped){this.featuresGrouped[e].forEach((e=>{for(let t in e){const i=e[t];(n||o&&!i.presentation["src-vertical"])&&(i.presentation.currentSrc=i.presentation.src),o&&i.presentation["src-vertical"]&&(i.presentation.currentSrc=i.presentation["src-vertical"])}}))}}}};Vue.createApp(FeaturesApp).mount(featuresAppId);let bookSlider=new Swiper(".my-features__slider",{wrapperClass:"my-features__wrapper",slideClass:"my-features__slide",effect:"flip",on:{update(){let e=document.querySelectorAll(".swiper-slide-shadow-left"),t=document.querySelectorAll(".swiper-slide-shadow-right"),n=[];e.forEach((e=>{n.push(e)})),t.forEach((e=>{n.push(e)})),n.forEach((e=>{e.style.backgroundImage="url('img/mains/book.jpg')",e.style.backgroundPosition="center",e.style.backgroundSize="300% 125%"}))},touchStart(e,t){t.target.classList.contains("features-slide__presentation")||t.target.closest(".features-slide__presentation")||t.target.classList.contains("features-slide__title")?e.allowTouchMove=!1:e.allowTouchMove=!0},slideChange(e){e.el.querySelectorAll("video").forEach((e=>videoMethods.pause(e)))}}});function bookSliderFix(){let e=document.querySelector(".my-features__slider");!function(){let t=window.matchMedia("(max-width: 1169px)");function n(){let n=document.querySelector(".book-controls"),o=n.querySelector(".book-controls__arrow--left"),i=n.querySelector(".book-controls__arrow--right");function s(){e.style.transform="translate(0, 0)"}o.addEventListener("click",s),i.addEventListener("click",(function(){let t=e.offsetWidth,n=window.innerWidth;e.style.transform=`translate(-${t-n+20}px, 0)`})),window.addEventListener("resize",s),t.matches||e.style.removeProperty("transform")}n(),t.addEventListener("change",n)}(),function(){function t(){let t=document.querySelector(".book-pagination"),n=e.querySelectorAll("[data-slider-page]"),o=e.querySelector(".swiper-slide-active");if(o){let e=o.querySelectorAll("[data-slider-page]"),i=[];e.length>0&&e.forEach((e=>{i.push(e.dataset.sliderPage)})),i.length>1?t.innerHTML=`Страницы ${i[0]}-${i[1]} из ${n.length}`:t.innerHTML=`Страница ${i[0]} из ${n.length}`}}t(),bookSlider.on("update",t),bookSlider.on("activeIndexChange",(function(){setTimeout((()=>{t()}),100)}))}(),bookSlider.$el.forEach((e=>{new MutationObserver((e=>{bookSlider.update()})).observe(e,{childList:!0,subtree:!0})}))}bookSliderFix();